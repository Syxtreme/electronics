Version 4
SHEET 1 1316 680
WIRE -912 -240 -1072 -240
WIRE -576 -240 -912 -240
WIRE 32 -240 -576 -240
WIRE 224 -240 32 -240
WIRE 288 -240 224 -240
WIRE 432 -240 288 -240
WIRE 1072 -240 432 -240
WIRE 32 -224 32 -240
WIRE 1072 -224 1072 -240
WIRE 224 -176 224 -240
WIRE 32 -128 32 -144
WIRE 144 -128 32 -128
WIRE 160 -128 144 -128
WIRE 144 -112 144 -128
WIRE 1072 -112 1072 -144
WIRE 1072 -112 944 -112
WIRE 432 -80 432 -240
WIRE -496 -64 -816 -64
WIRE -112 -64 -336 -64
WIRE 32 -64 32 -128
WIRE 32 -64 0 -64
WIRE 224 -64 224 -80
WIRE 384 -64 224 -64
WIRE 1168 -64 1136 -64
WIRE 1296 -64 1248 -64
WIRE 224 -48 224 -64
WIRE -1072 -32 -1072 -240
WIRE -912 -32 -912 -240
WIRE 144 -32 144 -48
WIRE -496 -16 -704 -16
WIRE -256 -16 -320 -16
WIRE -112 -16 -112 -64
WIRE -64 -16 -112 -16
WIRE 32 0 32 -64
WIRE 64 0 32 0
WIRE 160 0 144 0
WIRE -816 16 -816 -64
WIRE 1072 16 1072 -16
WIRE 1296 16 1296 -64
WIRE 224 64 224 48
WIRE 432 64 432 16
WIRE 544 64 432 64
WIRE 576 64 544 64
WIRE 704 64 656 64
WIRE 816 64 704 64
WIRE 288 80 288 -240
WIRE 0 96 0 32
WIRE 432 112 432 64
WIRE 816 112 816 64
WIRE -816 128 -816 96
WIRE -704 128 -704 64
WIRE -704 128 -816 128
WIRE -496 128 -496 32
WIRE -496 128 -704 128
WIRE 128 128 96 128
WIRE 224 128 208 128
WIRE -816 144 -816 128
WIRE 208 144 208 128
WIRE 544 144 544 64
WIRE 592 144 544 144
WIRE 704 144 704 64
WIRE 704 144 656 144
WIRE -256 192 -256 -16
WIRE 96 192 96 128
WIRE 96 192 -256 192
WIRE 288 192 288 176
WIRE 384 192 288 192
WIRE 944 192 944 -112
WIRE 944 192 864 192
WIRE 288 208 288 192
WIRE 208 224 208 208
WIRE 432 240 432 208
WIRE 624 240 432 240
WIRE 816 240 816 208
WIRE 816 240 624 240
WIRE 944 240 944 192
WIRE -576 256 -576 -240
WIRE 48 256 -576 256
WIRE 96 256 96 192
WIRE 224 256 96 256
WIRE 624 272 624 240
WIRE 288 320 288 304
WIRE 48 352 48 336
WIRE 48 352 -112 352
WIRE 576 352 48 352
WIRE 48 368 48 352
WIRE -112 384 -112 352
WIRE 624 384 624 368
WIRE 624 384 144 384
WIRE 144 416 144 384
WIRE 144 416 112 416
WIRE -1072 480 -1072 48
WIRE -912 480 -912 32
WIRE -912 480 -1072 480
WIRE -112 480 -112 448
WIRE -112 480 -912 480
WIRE 48 480 48 464
WIRE 48 480 -112 480
WIRE 624 480 624 464
WIRE 624 480 48 480
WIRE 944 480 944 320
WIRE 944 480 624 480
WIRE 624 496 624 480
FLAG 624 496 0
FLAG 1072 16 0
FLAG -816 144 0
FLAG 1296 16 0
FLAG 288 320 0
FLAG 224 64 0
FLAG 0 96 0
FLAG 208 224 0
FLAG 144 -32 0
SYMBOL nmos 864 112 M0
SYMATTR InstName M1
SYMATTR Value IRLML6346
SYMBOL pmos 384 16 M180
SYMATTR InstName M2
SYMATTR Value IRF7309P
SYMBOL Digital\\dflop -416 -112 R0
SYMATTR InstName A1
SYMATTR SpiceLine Vhigh=5V Trise=10n Tfall=10n Td=1n Rlow=50
SYMBOL npn 1136 -112 M0
SYMATTR InstName Q2
SYMATTR Value 2N2222
SYMBOL res 1264 -80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 4k7
SYMBOL res 1056 -240 R0
SYMATTR InstName R3
SYMATTR Value 4k7
SYMBOL res 928 224 R0
SYMATTR InstName R5
SYMATTR Value 100k
SYMBOL nmos 384 112 R0
SYMATTR InstName M4
SYMATTR Value IRLML6346
SYMBOL voltage -816 0 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value PULSE(0 5 1m 10n 10n {dir_period * duty * 2} {dir_period*2})
SYMBOL voltage -1072 -48 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=10m
SYMATTR InstName V2
SYMATTR Value 6V
SYMBOL voltage -704 -32 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value PULSE(0 5 {dir_period/3000} 10n 10n {dir_period/200} {dir_period/100})
SYMBOL nmos 576 272 R0
SYMATTR InstName M5
SYMATTR Value BSC082N10LS
SYMBOL res 608 368 R0
SYMATTR InstName R7
SYMATTR Value 1R
SYMBOL npn 112 368 M0
SYMATTR InstName Q3
SYMATTR Value 2N2222
SYMBOL res 32 240 R0
SYMATTR InstName R8
SYMATTR Value 10k
SYMBOL ind 560 80 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 1m
SYMATTR SpiceLine Rser=5R
SYMBOL cap -928 -32 R0
SYMATTR InstName C1
SYMATTR Value 100µ
SYMBOL cap 656 128 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 10n
SYMBOL cap -128 384 R0
SYMATTR InstName C3
SYMATTR Value 100n
SYMBOL npn 224 80 R0
SYMATTR InstName Q4
SYMATTR Value 2N2222
SYMBOL pnp 224 304 M180
SYMATTR InstName Q5
SYMATTR Value 2N2907
SYMBOL npn 160 -176 R0
SYMATTR InstName Q1
SYMATTR Value 2N2222
SYMBOL pnp 160 48 M180
SYMATTR InstName Q6
SYMATTR Value 2N2907
SYMBOL res 16 -240 R0
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL npn -64 -64 R0
SYMATTR InstName Q7
SYMATTR Value 2N2222
SYMBOL res 224 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL res 160 -16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 100k
SYMBOL cap 192 144 R0
SYMATTR InstName C4
SYMATTR Value 1n
SYMBOL cap 128 -112 R0
SYMATTR InstName C5
SYMATTR Value 470p
TEXT -1056 408 Left 2 !.tran 0 10.4m 0.8m
TEXT -832 200 Left 2 !.param dir_period=100u
TEXT -832 240 Left 2 !.param duty=0.5
